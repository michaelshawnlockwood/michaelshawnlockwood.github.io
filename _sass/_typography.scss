/* ===== Typography scale tweaks ===== */
html { font-size: 15px; } 

/* Headings tighten a touch so they don't look oversized after base change */
h1 { letter-spacing: -0.01em; }
h2, h3 { letter-spacing: -0.005em; }
h3 { position: relative; }
.anchorjs-link { position: absolute; right: -1.25rem; top: .2rem; opacity: .6; }
.anchorjs-link:hover { opacity: 1; }

h2 {
  font-size: 1.75rem; /* bigger than h3 */
  margin-top: 2rem;
  border-bottom: 2px solid #aaaaaa; /* optional: underline */
}

h3 {
  font-size: 1.25rem;
  margin-top: 1.25rem;
}

.section-intro { max-width:70ch; }
.section-title{ position:relative; display:inline-block; }

.section-title .fa-clock { vertical-align:-2px; }
.section-subtitle { margin:.25rem 0 1rem; font-style:italic; opacity:.9; }
.section-title:hover .anchor{ opacity:1; }

/* Remove the theme's right-side heading permalink */
.section-title .anchorjs-link,
.section-title .heading-anchor,
.section-title a.anchor-link,
.section-title a[href^="#"]:not(.anchor) { display: none !important; }

.section-title .anchor{
  position:absolute; right:-1.25rem; top:.2rem;
  width:1rem; height:1rem;
  opacity:.6;               /* or 0 if you only want it on hover */
  background: currentColor;
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="%23fff" d="M7.775 3.275a3.25 3.25 0 0 1 4.596 0l.354.354a3.25 3.25 0 0 1 0 4.596l-2.122 2.122a3.25 3.25 0 0 1-4.596 0 .75.75 0 1 1 1.06-1.06 1.75 1.75 0 0 0 2.476 0l2.122-2.122a1.75 1.75 0 0 0 0-2.476l-.354-.354a1.75 1.75 0 0 0-2.476 0 .75.75 0 1 1-1.06-1.06Z"/><path fill="%23fff" d="M3.275 7.775a3.25 3.25 0 0 1 0-4.596l2.122-2.122a3.25 3.25 0 0 1 4.596 0 .75.75 0 1 1-1.06 1.06 1.75 1.75 0 0 0-2.476 0L4.86 4.3a1.75 1.75 0 0 0 0 2.476l.354.354a1.75 1.75 0 0 0 2.476 0 .75.75 0 1 1 1.06 1.06 3.25 3.25 0 0 1-4.596 0l-.354-.354Z"/></svg>') center/contain no-repeat;
          mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="%23fff" d="M7.775 3.275a3.25 3.25 0 0 1 4.596 0l.354.354a3.25 3.25 0 0 1 0 4.596l-2.122 2.122a3.25 3.25 0 0 1-4.596 0 .75.75 0 1 1 1.06-1.06 1.75 1.75 0 0 0 2.476 0l2.122-2.122a1.75 1.75 0 0 0 0-2.476l-.354-.354a1.75 1.75 0 0 0-2.476 0 .75.75 0 1 1-1.06-1.06Z"/><path fill="%23fff" d="M3.275 7.775a3.25 3.25 0 0 1 0-4.596l2.122-2.122a3.25 3.25 0 0 1 4.596 0 .75.75 0 1 1-1.06 1.06 1.75 1.75 0 0 0-2.476 0L4.86 4.3a1.75 1.75 0 0 0 0 2.476l.354.354a1.75 1.75 0 0 0 2.476 0 .75.75 0 1 1 1.06 1.06 3.25 3.25 0 0 1-4.596 0l-.354-.354Z"/></svg>') center/contain no-repeat; /* Firefox */
  transition: opacity .2s;
}

// Text Utilities
.chart-note {
  margin-top: .25rem;
  font-size: 0.75rem !important;
  line-height: 1.5;
  opacity: 0.85;
  font-style: italic !important;
}

.caption {
  font-size: 0.75rem;
  line-height: 1.5;
  opacity: 0.85;
  text-align: center;
  font-style: italic !important;
}

.nuance {
  font-family: Georgia, serif;
  font-style: italic;
  font-size: 0.9em;   /* slightly smaller than body */
  color: $color-softwhite;        /* or #aaa for softer contrast */
  display: block;
  margin: 1em 0 1em 2em;
}

.source {
  font-size: 0.8em;   /* slightly smaller than body */
  color: $color-softwhite;        /* or #aaa for softer contrast */
  display: block;
  margin: 1em 0 1em 2em;
}

.md-h1 {
  padding-top: 1rem;
  font-size: 1.75rem !important;
  font-weight: bold;
}

.md-h2 {
  padding-top: 1em;
  margin-bottom: 0.05rem !important;
  font-size: 1.5rem !important;
  font-weight: bold;
}

.md-h3 {
  padding-top: 0.25rem;
  margin-bottom: 0.05rem !important;
  font-size: 1.25rem !important;
  font-weight: bold;
}

// Static SQL frame (block style, no copy button)
.code-frame {
  display: block;
  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;
  font-size: 0.95em;
  background: $code-background-color;   // reuse theme color or pick your own
  border-radius: 8px;               // rounded corners
  padding: 0.75em 1em;              // space inside
  margin: 1em 0;                    // vertical spacing
  overflow-x: auto;                 // scroll horizontally if needed
  color: inherit;
}

/* TOC icons: baseline styles are on .toc-ico; add spacing only within .toc__menu */
.toc__menu .toc-ico{ margin-right:.35em; }

/* Layout + spacing */
.toc__menu { display:flex; flex-wrap:wrap; gap:.9rem 1.25rem; align-items:flex-start; }
.toc__menu li { list-style:none; }

/* Links */
.toc__menu a{
  display:inline-flex; align-items:center; gap:.35em;
  padding:.35rem .6rem; border-radius:.8rem;
  transition: background .15s ease, color .15s ease, transform .12s ease;
}
.toc__menu a:hover{ 
  transform: translateY(-1px); 
  border-color: $color-hover;
}

/* Emoji-as-icons â†’ mono-ish + baseline tidy */
.toc-ico{
  display:inline-block; width:1.2em; text-align:center; line-height:1;
  transform: translateY(.02em);
  filter: grayscale(1) contrast(1.1) opacity(.9);
}
.toc__menu a:hover .toc-ico{ filter: grayscale(1) contrast(1.2) opacity(1); }

/* Keyboard focus */
.toc__menu a:focus-visible{
  outline:2px solid var(--mm-accent, $color-bg);
  outline-offset:2px;
}

/* Respect motion prefs */
@media (prefers-reduced-motion: reduce){
  .toc__menu a{ transition:none; }
  .toc__menu a:hover{ transform:none; }
}

:is(h2,h3,h4).heading-ico{
  position: relative;
  filter: grayscale(1) contrast(1.1) opacity(.9);
}

.toc .toc__menu a{
  filter: grayscale(1) contrast(1.1) opacity(.9);
}

.toc .toc__menu a:hover{ 
  filter: none; 
}


